%% statePlot.m
% Function to plot the state progression of vehicle on race track

function statePlot(x,u,dt)

    x_t = 0:dt:dt*(size(x,2)-1);
    u_t = 0:dt:dt*(size(u,2)-1);
    
    s = x(:,1);
    e_lat = x(:,2);
    e_psi = x(:,3);
    v = x(:,4);

    accel = u(:,1);
    delta = u(:,2);
    
    plot(x_t,s,'DisplayName','$s$')
    hold on
    plot(xt,e_lat,'DisplayName','$e_{y}$')
    plot(t,e_psi,'DisplayName','$e_{\psi}$')
    plot(t,v,'DisplayName','$v$')
    hold off
    xlabel('time $t$','Interpreter','latex')
    title('Simplified Bicycle Dynamics with PID Control','Interpreter','latex')
    legend('show','Interpreter','latex','FontSize',14)
    grid on
    
    subplot(212)
    plot(u_t,accel,'DisplayName','$a$')
    hold on
    plot(u_t,delta,'DisplayName','$\delta$')
    hold off
    xlabel('time $t$','Interpreter','latex')
    title('Dynamic Bicycle Optimal Control Sequence','Interpreter','latex')
    legend('show','Interpreter','latex','FontSize',14)
    grid on
    
end